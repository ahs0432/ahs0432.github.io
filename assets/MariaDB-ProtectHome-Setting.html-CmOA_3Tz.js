import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as i,o as t,a}from"./app-D3e6NA8G.js";const s={},l=a(`<h2 id="🎇-테스트-환경" tabindex="-1"><a class="header-anchor" href="#🎇-테스트-환경"><span>🎇 테스트 환경</span></a></h2><ul><li>MariaDB 10.5.17</li></ul><h2 id="🤔-발생-상황" tabindex="-1"><a class="header-anchor" href="#🤔-발생-상황"><span>🤔 발생 상황</span></a></h2><ul><li>MariaDB 경로를 /var/lib/mysql에서 /home/mysql/data로 변경하는 과정에서 오류가 발생됐다.</li><li>오류는 <code>[Warning] can&#39;t create test file /[경로]/[hostname].lower-test</code>로 확인됐다.</li></ul><h2 id="🔍-오류-분석" tabindex="-1"><a class="header-anchor" href="#🔍-오류-분석"><span>🔍 오류 분석</span></a></h2><ul><li>오류 내용으로 보았을 때 변경한 경로에 파일을 생성할 수 없어 오류가 발생됐다.</li><li>권한이나 소유자 부분을 살폈는데 문제가 없었고 아래와 같은 내용이 추가 확인됐다. <ul><li>MariaDB 업데이트에 따라 아래 경로에 대한 보호 옵션(ProtectHome)이 만들어졌다. <ul><li>/root</li><li>/home</li><li>/run/user</li></ul></li></ul></li><li>이에 따라 대상 디렉토리로 경로를 변경하게 되는 경우 오류가 발생되는 것으로 확인된다.</li></ul><h2 id="🔧-오류-해결" tabindex="-1"><a class="header-anchor" href="#🔧-오류-해결"><span>🔧 오류 해결</span></a></h2><p>오류 해결은 생각보다 굉장히 간단하다 systemd에 등록된 service 파일을 수정하면 된다.</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /usr/lib/systemd/system/mariadb.service</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;"># Prevent accessing /home, /root and /run/user</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-dark:#7F848E;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">#ProtectHome=true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ProtectHome</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">false</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>mariadb.service</code> 파일의 ProtectHome 옵션을 <code>true</code> → <code>false</code>로 변경한다.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> daemon-reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>systemd에 반영된 service 설정 파일을 동기화한다.</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> mariadb</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li>MariaDB를 재시작하면 정상적으로 동작되는 것이 확인된다.</li></ul><hr><p>평소 몇 번 겪었던 이슈인데 구축 간 10분 정도 멈칫하게 됐다.<br> 앞으로는 이런 일이 없도록.. 다른 분들도 참고하도록 포스팅으로 남겨본다.</p><p>끝까지 포스팅을 읽어주셔서 감사드리며, 틀린 내용이 있다면 댓글 부탁드립니다. 😎</p>`,17),n=[l];function r(o,h){return t(),i("div",null,n)}const p=e(s,[["render",r],["__file","MariaDB-ProtectHome-Setting.html.vue"]]),m=JSON.parse(`{"path":"/posts/Computing/Database/MySQL/MariaDB-ProtectHome-Setting.html","title":"[MariaDB] can't create test file lower-test 오류 해결","lang":"ko-KR","frontmatter":{"title":"[MariaDB] can't create test file lower-test 오류 해결","categories":["MySQL"],"tags":["MariaDB","Database","Error","ProtectHome"],"date":"2022-08-25T00:00:00.000Z","editLink":false,"lastUpdated":true,"description":"🎇 테스트 환경 MariaDB 10.5.17 🤔 발생 상황 MariaDB 경로를 /var/lib/mysql에서 /home/mysql/data로 변경하는 과정에서 오류가 발생됐다. 오류는 [Warning] can't create test file /[경로]/[hostname].lower-test로 확인됐다. 🔍 ...","head":[["meta",{"property":"og:url","content":"https://blog.false.kr/posts/Computing/Database/MySQL/MariaDB-ProtectHome-Setting.html"}],["meta",{"property":"og:site_name","content":"찬스의 개발 블로그 : Chance Devlog"}],["meta",{"property":"og:title","content":"[MariaDB] can't create test file lower-test 오류 해결"}],["meta",{"property":"og:description","content":"🎇 테스트 환경 MariaDB 10.5.17 🤔 발생 상황 MariaDB 경로를 /var/lib/mysql에서 /home/mysql/data로 변경하는 과정에서 오류가 발생됐다. 오류는 [Warning] can't create test file /[경로]/[hostname].lower-test로 확인됐다. 🔍 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"ko-KR"}],["meta",{"property":"og:updated_time","content":"2024-08-14T14:25:16.000Z"}],["meta",{"property":"article:author","content":"Chance"}],["meta",{"property":"article:tag","content":"MariaDB"}],["meta",{"property":"article:tag","content":"Database"}],["meta",{"property":"article:tag","content":"Error"}],["meta",{"property":"article:tag","content":"ProtectHome"}],["meta",{"property":"article:published_time","content":"2022-08-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-14T14:25:16.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"[MariaDB] can't create test file lower-test 오류 해결\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-08-25T00:00:00.000Z\\",\\"dateModified\\":\\"2024-08-14T14:25:16.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Chance\\",\\"url\\":\\"https://blog.false.kr\\",\\"email\\":\\"chance0432@naver.com\\"}]}"]]},"headers":[{"level":2,"title":"🎇 테스트 환경","slug":"🎇-테스트-환경","link":"#🎇-테스트-환경","children":[]},{"level":2,"title":"🤔 발생 상황","slug":"🤔-발생-상황","link":"#🤔-발생-상황","children":[]},{"level":2,"title":"🔍 오류 분석","slug":"🔍-오류-분석","link":"#🔍-오류-분석","children":[]},{"level":2,"title":"🔧 오류 해결","slug":"🔧-오류-해결","link":"#🔧-오류-해결","children":[]}],"git":{"createdTime":1661354330000,"updatedTime":1723645516000,"contributors":[{"name":"Chance","email":"ahs0432@naver.com","commits":1}]},"readingTime":{"minutes":0.3,"words":91},"filePathRelative":"posts/Computing/Database/MySQL/MariaDB-ProtectHome-Setting.md","localizedDate":"2022년 8월 25일","excerpt":"<h2>🎇 테스트 환경</h2>\\n<ul>\\n<li>MariaDB 10.5.17</li>\\n</ul>\\n<h2>🤔 발생 상황</h2>\\n<ul>\\n<li>MariaDB 경로를 /var/lib/mysql에서 /home/mysql/data로 변경하는 과정에서 오류가 발생됐다.</li>\\n<li>오류는 <code>[Warning] can't create test file /[경로]/[hostname].lower-test</code>로 확인됐다.</li>\\n</ul>\\n<h2>🔍 오류 분석</h2>\\n<ul>\\n<li>오류 내용으로 보았을 때 변경한 경로에 파일을 생성할 수 없어 오류가 발생됐다.</li>\\n<li>권한이나 소유자 부분을 살폈는데 문제가 없었고 아래와 같은 내용이 추가 확인됐다.\\n<ul>\\n<li>MariaDB 업데이트에 따라 아래 경로에 대한 보호 옵션(ProtectHome)이 만들어졌다.\\n<ul>\\n<li>/root</li>\\n<li>/home</li>\\n<li>/run/user</li>\\n</ul>\\n</li>\\n</ul>\\n</li>\\n<li>이에 따라 대상 디렉토리로 경로를 변경하게 되는 경우 오류가 발생되는 것으로 확인된다.</li>\\n</ul>","autoDesc":true}`);export{p as comp,m as data};
